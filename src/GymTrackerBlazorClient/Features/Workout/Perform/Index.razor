@page "/workout/perform"
@page "/workout/view/{id:guid}"

@using GymTracker.BlazorClient.Features.AppBar.Store;
@using GymTracker.BlazorClient.Features.Workout.Perform.Components.Main
@using GymTracker.BlazorClient.Features.Workout.Perform.Components.SideBar
@using GymTracker.BlazorClient.Features.Workout.Perform.Store;

@inherits FluxorComponent

@inject IDispatcher Dispatcher
@inject IState<WorkoutState> State

<MudContainer Class="pa-3 ma-0" Style="height: 100%; padding-bottom: 0!important;">
    <MudGrid Style="height: 100%">
        <MudItem Style="flex-basis: 20%; max-width: 20%">
            <SideBar></SideBar>
        </MudItem>
        <MudItem Class="px-1 pb-0">
            <MudDivider Vertical="true" FlexItem="true" Style="height: 100%" />
        </MudItem>
        <MudItem>
            @if (State.Value.SelectedExerciseId.HasValue)
            {
                <Main></Main>    
            }
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [Parameter]
    public Guid Id { get; set; }

    protected override void OnInitialized()
    {
        Dispatcher.Dispatch(new SetBreadcrumbAction(new[]
        {
            new BreadcrumbItem("Workout", "/workout/perform", false, Icons.Material.Filled.SportsMartialArts),
            new BreadcrumbItem("Perform", "/workout/perform", false, Icons.Material.Filled.ChecklistRtl)
        }));
        base.OnInitialized();
    }

    protected override void OnParametersSet()
    {

        base.OnParametersSet();
    }
}
